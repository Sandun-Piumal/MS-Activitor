<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Home System</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body class="light-theme">
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <div class="container">
        <!-- Header Section -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-home"></i>
                    <h1>Smart Home System</h1>
                </div>
                <div class="connection-info">
                    <div class="status-indicators">
                        <div class="status-item">
                            <span class="status-label">Connection:</span>
                            <span id="connection-status" class="status offline">
                                <span class="connection-dot disconnected"></span>
                                <i class="fas fa-wifi"></i> Disconnected
                            </span>
                        </div>
                        <div class="status-item">
                            <span class="status-label">Security:</span>
                            <span id="security-status" class="status-active">
                                <i class="fas fa-shield-alt"></i> Active
                            </span>
                        </div>
                    </div>
                    <div class="datetime">
                        <div id="time-display" class="time">00:00:00</div>
                        <div id="date-display" class="date">January 1, 2024</div>
                    </div>
                    <div class="control-buttons-small">
                        <button class="btn btn-info" onclick="manualRefresh()" title="Refresh Data (F5)">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                        <button class="btn btn-outline" onclick="openSettings()" title="Settings">
                            <i class="fas fa-cog"></i> Settings
                        </button>
                        <button class="btn btn-outline theme-toggle" onclick="toggleTheme()" title="Toggle Dark/Light Mode">
                            <i class="fas fa-moon" id="theme-icon"></i>
                            <span id="theme-text">Dark</span>
                        </button>
                    </div>

                    <div class="header-actions">
                        <button id="logout-btn" class="logout-btn">
                            <i class="fas fa-sign-out-alt"></i>
                            Logout
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Dashboard -->
        <main class="dashboard" id="main-content">
            <!-- Left Sidebar - Quick Controls -->
            <aside class="sidebar">
                <!-- System Overview Card -->
                <div class="card overview-card">
                    <div class="card-header">
                        <i class="fas fa-tachometer-alt"></i>
                        <h3>System Overview</h3>
                    </div>
                    <div class="card-content">
                        <div class="overview-item">
                            <span class="label">Battery Level</span>
                            <div class="progress-container">
                                <div class="progress-bar">
                                    <div id="battery-level" class="progress-fill battery" style="width: 85%"></div>
                                </div>
                                <span id="battery-text" class="value">85%</span>
                            </div>
                        </div>
                        <div class="overview-item">
                            <span class="label">Water Tank</span>
                            <div class="progress-container">
                                <div class="progress-bar">
                                    <div id="water-level" class="progress-fill water" style="width: 70%"></div>
                                </div>
                                <span id="water-text" class="value">70%</span>
                            </div>
                        </div>
                        <div class="overview-item">
                            <span class="label">Temperature</span>
                            <span id="temperature" class="value">25Â°C</span>
                        </div>
                        <div class="overview-item">
                            <span class="label">Humidity</span>
                            <span id="humidity" class="value">60%</span>
                        </div>
                        <div class="overview-item">
                            <span class="label">Last Update</span>
                            <span id="last-update" class="value">Just now</span>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions Card -->
                <div class="card quick-actions-card">
                    <div class="card-header">
                        <i class="fas fa-bolt"></i>
                        <h3>Quick Actions</h3>
                    </div>
                    <div class="card-content">
                        <div class="action-group">
                            <button class="btn btn-primary btn-block" onclick="controlAllLights(true)">
                                <i class="fas fa-lightbulb"></i> All Lights ON
                            </button>
                            <button class="btn btn-secondary btn-block" onclick="controlAllLights(false)">
                                <i class="fas fa-lightbulb"></i> All Lights OFF
                            </button>
                        </div>
                        <div class="action-group">
                            <button class="btn btn-success btn-block" onclick="setSecuritySystem(true)">
                                <i class="fas fa-shield-alt"></i> Enable Security
                            </button>
                            <button class="btn btn-warning btn-block" onclick="setSecuritySystem(false)">
                                <i class="fas fa-shield-alt"></i> Disable Security
                            </button>
                        </div>
                        <div class="action-group">
                            <button class="btn btn-info btn-block" onclick="testBuzzer()">
                                <i class="fas fa-bell"></i> Test Buzzer
                            </button>
                            <button class="btn btn-danger btn-block" onclick="stopAlarm()" id="stop-alarm-btn">
                                <i class="fas fa-bell-slash"></i> Stop Alarm
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Connection Help Card -->
                <div class="card help-card">
                    <div class="card-header">
                        <i class="fas fa-question-circle"></i>
                        <h3>Connection Help</h3>
                    </div>
                    <div class="card-content">
                        <div class="help-item">
                            <strong>ESP32 IP Format:</strong>
                            <code>192.168.1.100</code>
                        </div>
                        <div class="help-item">
                            <strong>Common Issues:</strong>
                            <ul>
                                <li>Check ESP32 is powered on</li>
                                <li>Verify IP address in Serial Monitor</li>
                                <li>Ensure same WiFi network</li>
                                <li>Check firewall settings</li>
                            </ul>
                        </div>
                        <button class="btn btn-outline btn-block" onclick="openSettings()">
                            <i class="fas fa-cog"></i> Connection Settings
                        </button>
                    </div>
                </div>
            </aside>

            <!-- Main Content Area -->
            <section class="main-content">
                <!-- Gate & Garage & Door Control Row -->
                <div class="card-row">
                    <!-- Gate Control Card -->
                    <div class="card control-card">
                        <div class="card-header">
                            <i class="fas fa-gate"></i>
                            <h3>Gate Control</h3>
                        </div>
                        <div class="card-content">
                            <div class="status-display">
                                <span class="label">Status:</span>
                                <span id="gate-status" class="status-badge status-closed">Closed</span>
                            </div>
                            <button class="btn btn-primary btn-block" onclick="controlGate()">
                                <i class="fas fa-exchange-alt"></i> Toggle Gate
                            </button>
                        </div>
                    </div>

                    <!-- Garage Control Card -->
                    <div class="card control-card">
                        <div class="card-header">
                            <i class="fas fa-warehouse"></i>
                            <h3>Garage Control</h3>
                        </div>
                        <div class="card-content">
                            <div class="status-display">
                                <span class="label">Status:</span>
                                <span id="garage-status" class="status-badge status-closed">Closed</span>
                            </div>
                            <div class="status-display">
                                <span class="label">Distance:</span>
                                <span id="ultrasonic-distance" class="value">0 cm</span>
                            </div>
                            <div class="control-group">
                                <button class="btn btn-success" onclick="openGarage()">
                                    <i class="fas fa-door-open"></i> Open
                                </button>
                                <button class="btn btn-warning" onclick="closeGarage()">
                                    <i class="fas fa-door-closed"></i> Close
                                </button>
                            </div>
                            <div class="toggle-group">
                                <label class="toggle-label">
                                    <span>Auto Mode</span>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="garage-mode-toggle" onchange="setGarageMode(this.checked)">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Main Door Control Card -->
                    <div class="card control-card">
                        <div class="card-header">
                            <i class="fas fa-door-closed"></i>
                            <h3>Main Door Control</h3>
                        </div>
                        <div class="card-content">
                            <div class="status-display">
                                <span class="label">Door Status:</span>
                                <span id="main-door-status" class="status-badge status-closed">Closed</span>
                            </div>
                            <div class="status-display">
                                <span class="label">Lock Status:</span>
                                <span id="door-lock-status" class="status-badge status-locked">Locked</span>
                            </div>
                            <div class="control-group">
                                <button class="btn btn-success" onclick="openMainDoor()">
                                    <i class="fas fa-door-open"></i> Open
                                </button>
                                <button class="btn btn-warning" onclick="closeMainDoor()">
                                    <i class="fas fa-door-closed"></i> Close
                                </button>
                                <button class="btn btn-info" onclick="toggleDoorLock()">
                                    <i class="fas fa-key"></i> Toggle Lock
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- LED Control Row -->
                <div class="card-row">
                    <div class="card led-control-card">
                        <div class="card-header">
                            <i class="fas fa-lightbulb"></i>
                            <h3>LED Control</h3>
                        </div>
                        <div class="card-content">
                            <div class="led-grid">
                                <div class="led-item">
                                    <label class="toggle-label">
                                        <span>LED 1</span>
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="led-1" onchange="controlLED(1, this.checked)">
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </label>
                                </div>
                                <div class="led-item">
                                    <label class="toggle-label">
                                        <span>LED 2</span>
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="led-2" onchange="controlLED(2, this.checked)">
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </label>
                                </div>
                                <div class="led-item">
                                    <label class="toggle-label">
                                        <span>LED 3</span>
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="led-3" onchange="controlLED(3, this.checked)">
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </label>
                                </div>
                                <div class="led-item">
                                    <label class="toggle-label">
                                        <span>LED 4</span>
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="led-4" onchange="controlLED(4, this.checked)">
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </label>
                                </div>
                                <div class="led-item">
                                    <label class="toggle-label">
                                        <span>LED 5</span>
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="led-5" onchange="controlLED(5, this.checked)">
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </label>
                                </div>
                                <div class="led-item">
                                    <label class="toggle-label">
                                        <span>LED 6</span>
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="led-6" onchange="controlLED(6, this.checked)">
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sensor Data Row -->
                <div class="card-row">
                    <!-- Temperature & Humidity Card -->
                    <div class="card sensor-card">
                        <div class="card-header">
                            <i class="fas fa-thermometer-half"></i>
                            <h3>Temperature & Humidity</h3>
                        </div>
                        <div class="card-content">
                            <div class="sensor-display">
                                <div class="sensor-item">
                                    <i class="fas fa-temperature-high"></i>
                                    <div class="sensor-value" id="temperature-display">25Â°C</div>
                                </div>
                                <div class="sensor-item">
                                    <i class="fas fa-tint"></i>
                                    <div class="sensor-value" id="humidity-display">60%</div>
                                </div>
                            </div>
                            <div class="status-display">
                                <span class="label">Fan Status:</span>
                                <span id="fan-status" class="status-badge status-off">OFF</span>
                            </div>
                        </div>
                    </div>

                    <!-- Water Level Card -->
                    <div class="card sensor-card">
                        <div class="card-header">
                            <i class="fas fa-water"></i>
                            <h3>Water Tank Level</h3>
                        </div>
                        <div class="card-content">
                            <div class="water-level-display">
                                <div class="water-level-value" id="water-level-display">70%</div>
                                <div class="water-level-bar">
                                    <div class="water-level-fill" style="height: 70%"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Security Status Card -->
                    <div class="card security-card">
                        <div class="card-header">
                            <i class="fas fa-shield-alt"></i>
                            <h3>Security System</h3>
                        </div>
                        <div class="card-content">
                            <div class="security-status">
                                <div class="status-item">
                                    <span class="label">System Status:</span>
                                    <span id="security-status" class="status-badge status-on">Active</span>
                                </div>
                                <div class="status-item">
                                    <span class="label">Motion Sensor:</span>
                                    <span id="motion-status" class="status-badge status-off">No Motion</span>
                                </div>
                                <div class="status-item">
                                    <span class="label">Laser Security:</span>
                                    <span id="laser-status" class="status-badge status-off">Inactive</span>
                                </div>
                                <div class="status-item">
                                    <span class="label">Alarm Status:</span>
                                    <span id="alarm-status" class="status-badge status-off">Inactive</span>
                                </div>
                            </div>
                            <button class="btn btn-danger btn-block" onclick="stopAlarm()" id="stop-alarm-main-btn">
                                <i class="fas fa-bell-slash"></i> Stop Alarm
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Environment Monitoring Row -->
                <div class="card-row">
                    <!-- Weather & Environment Card -->
                    <div class="card environment-card">
                        <div class="card-header">
                            <i class="fas fa-cloud-sun"></i>
                            <h3>Environment Monitoring</h3>
                        </div>
                        <div class="card-content">
                            <div class="environment-grid">
                                <div class="env-item">
                                    <i class="fas fa-cloud-rain"></i>
                                    <span class="label">Rain Status:</span>
                                    <span id="rain-status" class="status-badge status-off">No Rain</span>
                                </div>
                                <div class="env-item">
                                    <i class="fas fa-wind"></i>
                                    <span class="label">Curtain Status:</span>
                                    <span id="curtain-status" class="status-badge status-off">Outside</span>
                                </div>
                                <div class="env-item">
                                    <i class="fas fa-sun"></i>
                                    <span class="label">Solar Panel Angle:</span>
                                    <span id="solar-angle" class="value">45Â°</span>
                                </div>
                                <div class="env-item">
                                    <i class="fas fa-exclamation-triangle"></i>
                                    <span class="label">Gas Detection:</span>
                                    <span id="gas-status" class="status-badge status-off">Safe</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Alerts Panel -->
                    <div class="card alerts-card" id="alert-panel">
                        <div class="card-header">
                            <i class="fas fa-bell"></i>
                            <h3>System Alerts</h3>
                        </div>
                        <div class="card-content">
                            <div id="alert-content" class="alert-content">
                                <div class="alert-item info">
                                    <i class="fas fa-info-circle"></i>
                                    <span>All systems normal</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-cog"></i> System Settings</h2>
                <span class="close" onclick="closeSettings()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="settings-section">
                    <h3><i class="fas fa-wifi"></i> Connection Settings</h3>
                    <div class="form-group">
                        <label for="esp32-ip">ESP32 IP Address:</label>
                        <input type="text" id="esp32-ip" placeholder="192.168.1.100">
                        <small>Current IP: <span id="esp-ip">192.168.1.100</span></small>
                    </div>
                    <div class="form-group">
                        <label for="update-interval">Update Interval (seconds):</label>
                        <input type="number" id="update-interval" min="1" max="60" value="2">
                    </div>
                    <button class="btn btn-info" onclick="testConnection()">
                        <i class="fas fa-plug"></i> Test Connection
                    </button>
                </div>

                <div class="settings-section">
                    <h3><i class="fas fa-palette"></i> Theme Settings</h3>
                    <div class="form-group">
                        <label>Select Theme:</label>
                        <div class="radio-group">
                            <label class="radio-label">
                                <input type="radio" name="theme" value="light" onchange="setTheme('light')">
                                <span class="radio-custom"></span>
                                <i class="fas fa-sun"></i> Light Mode
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="theme" value="dark" onchange="setTheme('dark')">
                                <span class="radio-custom"></span>
                                <i class="fas fa-moon"></i> Dark Mode
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="theme" value="auto" onchange="setTheme('auto')">
                                <span class="radio-custom"></span>
                                <i class="fas fa-adjust"></i> Auto (System)
                            </label>
                        </div>
                        <small>Current theme: <span id="current-theme">Light</span></small>
                    </div>
                </div>

                <div class="settings-section">
                    <h3><i class="fas fa-info-circle"></i> System Information</h3>
                    <div class="info-grid">
                        <div class="info-item">
                            <span class="label">Web App Version:</span>
                            <span class="value">2.0.0</span>
                        </div>
                        <div class="info-item">
                            <span class="label">Last Updated:</span>
                            <span class="value">2024-01-20</span>
                        </div>
                        <div class="info-item">
                            <span class="label">Browser:</span>
                            <span class="value" id="browser-info">Loading...</span>
                        </div>
                        <div class="info-item">
                            <span class="label">Online Status:</span>
                            <span class="value" id="online-status">Checking...</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeSettings()">Cancel</button>
                <button class="btn btn-primary" onclick="saveSettings()">Save Settings</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Browser detection for settings
        document.addEventListener('DOMContentLoaded', function() {
            const browserInfo = document.getElementById('browser-info');
            const onlineStatus = document.getElementById('online-status');
            
            if (browserInfo) {
                browserInfo.textContent = navigator.userAgent.split(' ')[0];
            }
            
            if (onlineStatus) {
                onlineStatus.textContent = navigator.onLine ? 'Online' : 'Offline';
                onlineStatus.className = navigator.onLine ? 'value online' : 'value offline';
            }
        });
    </script>
</body>
</html>
[file content end]
